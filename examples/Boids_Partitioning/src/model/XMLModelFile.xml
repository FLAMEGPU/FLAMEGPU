<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="FLAMEGPU_vcproj.xslt"?>
<gpu:xmodel xmlns:gpu="http://www.dcs.shef.ac.uk/~paul/XMMLGPU"
        xmlns="http://www.dcs.shef.ac.uk/~paul/XMML">
	<name>Boids</name> 
	<gpu:environment>
		<gpu:functionFiles>
			<file>functions.c</file> 
		</gpu:functionFiles>
	</gpu:environment> 

	<xagents>
		<gpu:xagent>
			<name>Boid</name>
			<description>a simple boid agent</description>
			<memory>
				<gpu:variable>
					<type>int</type>
					<name>id</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>x</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>y</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>z</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>fx</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>fy</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>fz</name>
				</gpu:variable>
			</memory>
			<functions>
				<gpu:function>
					<name>outputdata</name>
					<currentState>default</currentState>
					<nextState>default</nextState>
					<outputs>
						<gpu:output>
							<messageName>location</messageName>
							<gpu:type>single_message</gpu:type>
						</gpu:output>
					</outputs>
					<gpu:reallocate>false</gpu:reallocate>
					<gpu:RNG>false</gpu:RNG>
				</gpu:function>
				<gpu:function>
					<name>inputdata</name>
					<currentState>default</currentState>
					<nextState>default</nextState>
					<inputs>
						<gpu:input>
							<messageName>location</messageName>
						</gpu:input>
					</inputs>
					<gpu:reallocate>false</gpu:reallocate>
					<gpu:RNG>false</gpu:RNG>
				</gpu:function>

			</functions>
			<states>
				<gpu:state>
					<name>default</name>
				</gpu:state>
        <initialState>default</initialState>
			</states>
			<gpu:type>continuous</gpu:type>
			<gpu:bufferSize>2048</gpu:bufferSize>
		</gpu:xagent>

	</xagents>

	<messages>
		<gpu:message>
			<name>location</name>
			<description>a message holding the location of an agent</description>
			<variables>
				<gpu:variable>
					<type>int</type>
					<name>id</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>x</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>y</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>z</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>fx</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>fy</name>
				</gpu:variable>
				<gpu:variable>
					<type>float</type>
					<name>fz</name>
				</gpu:variable>
			</variables>
			<gpu:partitioningSpatial>
				<gpu:radius>0.1</gpu:radius>
				<gpu:xmin>-0.5</gpu:xmin>
				<gpu:xmax>0.5</gpu:xmax>
				<gpu:ymin>-0.5</gpu:ymin>
				<gpu:ymax>0.5</gpu:ymax>
				<gpu:zmin>-0.5</gpu:zmin>
				<gpu:zmax>0.5</gpu:zmax>
			</gpu:partitioningSpatial>
			<gpu:bufferSize>2048</gpu:bufferSize>
		</gpu:message>
	</messages>

	<layers>
		<layer>
			<gpu:layerFunction>
				<name>outputdata</name>
			</gpu:layerFunction>
		</layer>
		<layer>
			<gpu:layerFunction>
				<name>inputdata</name>
			</gpu:layerFunction>
		</layer>

	</layers>

</gpu:xmodel>
